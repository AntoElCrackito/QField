vcpkg_from_github(
    OUT_SOURCE_PATH SOURCE_PATH
    REPO PikachuHy/QtWebDAV
    REF 4739a0f09cd005b9584f740637882be41ec0f062
    SHA512 1d9eed1765178e52b6e06db952d0e30b0caf6db4b78d2d5b9492a3a56f8dd17ff58d84726fa05d756e524751ac1718a77d2215e03957afb28ca2e4e444f1b912
    HEAD_REF master
    PATCHES
        static.patch
)

list(APPEND QTWEBDAV_OPTIONS -DQT_HOST_PATH=${CURRENT_HOST_INSTALLED_DIR})
if(VCPKG_CROSSCOMPILING)
    list(APPEND QTWEBDAV_OPTIONS -DQT_VERSION_MAJOR=6)
    list(APPEND QTWEBDAV_OPTIONS -DQT_HOST_PATH_CMAKE_DIR:PATH=${CURRENT_HOST_INSTALLED_DIR}/share)
endif()

vcpkg_cmake_configure(
    SOURCE_PATH "${SOURCE_PATH}"
    OPTIONS ${QTWEBDAV_OPTIONS}
)

vcpkg_cmake_install()

file(INSTALL "${SOURCE_PATH}/LICENSE" DESTINATION "${CURRENT_PACKAGES_DIR}/share/${PORT}" RENAME copyright)
