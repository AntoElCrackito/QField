vcpkg_from_github(
    OUT_SOURCE_PATH SOURCE_PATH
    REPO m-kuhn/QtWebDAV
    REF 6363cabf99368bb8a659af63584ac790f04cc9c6
    SHA512 059e99181fdd751b4598986997721b9e0e7debccbad7f3a258cba2745bd4b28896611566017c50a7bb9ace523bca388551a327b17f76968032c8a6e9a6bb2d34
    HEAD_REF main
    PATCHES fix.patch
)

list(APPEND QTWEBDAV_OPTIONS -DBUILD_WITH_QT6=True)
if(VCPKG_CROSSCOMPILING)
    list(APPEND QTWEBDAV_OPTIONS -DQT_HOST_PATH=${CURRENT_HOST_INSTALLED_DIR})
    list(APPEND QTWEBDAV_OPTIONS -DQT_HOST_PATH_CMAKE_DIR:PATH=${CURRENT_HOST_INSTALLED_DIR}/share)
endif()

vcpkg_cmake_configure(
    SOURCE_PATH "${SOURCE_PATH}"
    OPTIONS ${QTWEBDAV_OPTIONS}
)

vcpkg_cmake_install()

file(INSTALL "${SOURCE_PATH}/LICENSE" DESTINATION "${CURRENT_PACKAGES_DIR}/share/${PORT}" RENAME copyright)
