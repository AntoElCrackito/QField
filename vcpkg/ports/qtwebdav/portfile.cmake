vcpkg_from_github(
    OUT_SOURCE_PATH SOURCE_PATH
    REPO m-kuhn/QtWebDAV
    REF b0f868c31090fe6f7ea4ca27a71f91b54d1915c3
    SHA512 3327deb2ed39c46db2f2475e5afa352f75fbd98d090a6a1d2be7756f48ea70cf69913cef2419d55f3a998e3b4f64e561d74d123213aef8142967ea54861e8ef9
    HEAD_REF main
)

list(APPEND QTWEBDAV_OPTIONS -DBUILD_WITH_QT6=True)
if(VCPKG_CROSSCOMPILING)
    list(APPEND QTWEBDAV_OPTIONS -DQT_HOST_PATH=${CURRENT_HOST_INSTALLED_DIR})
    list(APPEND QTWEBDAV_OPTIONS -DQT_HOST_PATH_CMAKE_DIR:PATH=${CURRENT_HOST_INSTALLED_DIR}/share)
endif()

vcpkg_cmake_configure(
    SOURCE_PATH "${SOURCE_PATH}"
    OPTIONS ${QTWEBDAV_OPTIONS}
)

vcpkg_cmake_install()

file(INSTALL "${SOURCE_PATH}/LICENSE" DESTINATION "${CURRENT_PACKAGES_DIR}/share/${PORT}" RENAME copyright)
